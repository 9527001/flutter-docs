<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flutter æ¶æ„è®¾è®¡å¯è§†åŒ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #02569B;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: #f5f5f5;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            color: #666;
        }

        .tab:hover {
            background: #e0e0e0;
        }

        .tab.active {
            background: #02569B;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ¶æ„å±‚æ¬¡å›¾ */
        .architecture-layers {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }

        .layer {
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .layer:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .layer-framework {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .layer-engine {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .layer-embedder {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .layer-title {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .layer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .layer-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .layer-item h4 {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .layer-item ul {
            list-style: none;
            padding-left: 0;
        }

        .layer-item li {
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
        }

        .layer-item li:before {
            content: "â–¹";
            position: absolute;
            left: 0;
        }

        /* ä¸‰æ£µæ ‘å¯è§†åŒ– */
        .trees-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .tree-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 25px;
            color: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .tree-card:nth-child(2) {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .tree-card:nth-child(3) {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .tree-card h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
        }

        .tree-visual {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .tree-properties {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
        }

        .tree-properties p {
            margin: 8px 0;
            line-height: 1.6;
        }

        /* æ¸²æŸ“ç®¡çº¿ */
        .pipeline {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }

        .pipeline-step {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .step-content h4 {
            color: #02569B;
            margin-bottom: 8px;
            font-size: 1.3em;
        }

        .step-arrow {
            text-align: center;
            color: #667eea;
            font-size: 2em;
            margin: 10px 0;
        }

        /* ä¼˜åŠ¿ç½‘æ ¼ */
        .advantages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .advantage-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid #667eea;
            transition: transform 0.3s;
        }

        .advantage-card:hover {
            transform: translateY(-5px);
        }

        .advantage-card:nth-child(2) {
            border-top-color: #f5576c;
        }

        .advantage-card:nth-child(3) {
            border-top-color: #00f2fe;
        }

        .advantage-card:nth-child(4) {
            border-top-color: #ffa726;
        }

        .advantage-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .advantage-card h3 {
            color: #02569B;
            margin-bottom: 12px;
            font-size: 1.4em;
        }

        .advantage-card ul {
            list-style: none;
            padding: 0;
        }

        .advantage-card li {
            padding: 6px 0;
            padding-left: 25px;
            position: relative;
            color: #666;
        }

        .advantage-card li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
        }

        /* ä»£ç å— */
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .code-comment {
            color: #6a9955;
        }

        .code-keyword {
            color: #569cd6;
        }

        .code-string {
            color: #ce9178;
        }

        .code-class {
            color: #4ec9b0;
        }

        /* æµç¨‹å›¾ */
        .flow-diagram {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .flow-box {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px 25px;
            margin: 15px auto;
            max-width: 300px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .flow-arrow {
            color: #667eea;
            font-size: 2em;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .trees-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ Flutter æ¶æ„è®¾è®¡</h1>
        <p class="subtitle">æ·±å…¥ç†è§£ Flutter çš„åˆ†å±‚æ¶æ„ä¸æ ¸å¿ƒæœºåˆ¶</p>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">æ•´ä½“æ¶æ„</button>
            <button class="tab" onclick="showTab('trees')">ä¸‰æ£µæ ‘</button>
            <button class="tab" onclick="showTab('pipeline')">æ¸²æŸ“ç®¡çº¿</button>
            <button class="tab" onclick="showTab('advantages')">æ¶æ„ä¼˜åŠ¿</button>
            <button class="tab" onclick="showTab('patterns')">è®¾è®¡æ¨¡å¼</button>
        </div>

        <!-- æ•´ä½“æ¶æ„ -->
        <div id="overview" class="tab-content active">
            <h2 style="color: #02569B; margin-bottom: 20px;">Flutter åˆ†å±‚æ¶æ„</h2>
            
            <div class="architecture-layers">
                <div class="layer layer-framework">
                    <div class="layer-title">
                        ğŸ“± Framework Layer (æ¡†æ¶å±‚ - Dart)
                    </div>
                    <p>æä¾›å£°æ˜å¼UIç»„ä»¶ã€æ¸²æŸ“ç®¡ç†å’ŒåŸºç¡€æœåŠ¡</p>
                    <div class="layer-content">
                        <div class="layer-item">
                            <h4>Widgets Layer</h4>
                            <ul>
                                <li>Material Design</li>
                                <li>Cupertino (iOSé£æ ¼)</li>
                                <li>åŸºç¡€ç»„ä»¶</li>
                                <li>ç»„åˆå¼è®¾è®¡</li>
                            </ul>
                        </div>
                        <div class="layer-item">
                            <h4>Rendering Layer</h4>
                            <ul>
                                <li>RenderObject</li>
                                <li>Layout å¸ƒå±€</li>
                                <li>Paint ç»˜åˆ¶</li>
                                <li>å‘½ä¸­æµ‹è¯•</li>
                            </ul>
                        </div>
                        <div class="layer-item">
                            <h4>Foundation Layer</h4>
                            <ul>
                                <li>åŠ¨ç”»ç³»ç»Ÿ</li>
                                <li>æ‰‹åŠ¿è¯†åˆ«</li>
                                <li>Platform Channels</li>
                                <li>åŸºç¡€å·¥å…·</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="layer layer-engine">
                    <div class="layer-title">
                        âš™ï¸ Engine Layer (å¼•æ“å±‚ - C/C++)
                    </div>
                    <p>é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“å’Œè¿è¡Œæ—¶ç¯å¢ƒ</p>
                    <div class="layer-content">
                        <div class="layer-item">
                            <h4>Dart Runtime</h4>
                            <ul>
                                <li>Dart VM</li>
                                <li>JIT ç¼–è¯‘ (å¼€å‘)</li>
                                <li>AOT ç¼–è¯‘ (å‘å¸ƒ)</li>
                                <li>åƒåœ¾å›æ”¶</li>
                            </ul>
                        </div>
                        <div class="layer-item">
                            <h4>Skia Engine</h4>
                            <ul>
                                <li>2D å›¾å½¢æ¸²æŸ“</li>
                                <li>GPU åŠ é€Ÿ</li>
                                <li>è·¨å¹³å°ä¸€è‡´</li>
                                <li>é«˜æ€§èƒ½</li>
                            </ul>
                        </div>
                        <div class="layer-item">
                            <h4>Text & I/O</h4>
                            <ul>
                                <li>æ–‡æœ¬æ’ç‰ˆ</li>
                                <li>å¤šè¯­è¨€æ”¯æŒ</li>
                                <li>æ–‡ä»¶ç³»ç»Ÿ</li>
                                <li>ç½‘ç»œé€šä¿¡</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="layer layer-embedder">
                    <div class="layer-title">
                        ğŸ”Œ Embedder Layer (åµŒå…¥å±‚ - å¹³å°ç‰¹å®š)
                    </div>
                    <p>å¹³å°åŸç”Ÿé›†æˆå’Œç³»ç»ŸAPIè®¿é—®</p>
                    <div class="layer-content">
                        <div class="layer-item">
                            <h4>ç§»åŠ¨å¹³å°</h4>
                            <ul>
                                <li>Android (NDK)</li>
                                <li>iOS (UIKit)</li>
                                <li>å¹³å°äº‹ä»¶</li>
                                <li>åŸç”Ÿæ’ä»¶</li>
                            </ul>
                        </div>
                        <div class="layer-item">
                            <h4>Web å¹³å°</h4>
                            <ul>
                                <li>CanvasKit</li>
                                <li>HTML Renderer</li>
                                <li>WebAssembly</li>
                                <li>JavaScript äº’æ“ä½œ</li>
                            </ul>
                        </div>
                        <div class="layer-item">
                            <h4>æ¡Œé¢å¹³å°</h4>
                            <ul>
                                <li>Windows</li>
                                <li>macOS</li>
                                <li>Linux</li>
                                <li>åŸç”Ÿ API</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸‰æ£µæ ‘ -->
        <div id="trees" class="tab-content">
            <h2 style="color: #02569B; margin-bottom: 20px;">Flutter çš„ä¸‰æ£µæ ‘</h2>
            
            <div class="flow-diagram">
                <div class="flow-box" style="border-color: #667eea;">
                    <strong>Widget Tree</strong><br>
                    (é…ç½®æè¿°)
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-box" style="border-color: #f5576c;">
                    <strong>Element Tree</strong><br>
                    (å®ä¾‹ç®¡ç†)
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-box" style="border-color: #00f2fe;">
                    <strong>RenderObject Tree</strong><br>
                    (æ¸²æŸ“æ‰§è¡Œ)
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-box" style="border-color: #ffa726;">
                    <strong>Layer Tree</strong><br>
                    (å›¾å±‚åˆæˆ)
                </div>
            </div>

            <div class="trees-container">
                <div class="tree-card">
                    <h3>Widget Tree</h3>
                    <div class="tree-visual">
Container<br>
  â””â”€ Column<br>
      â”œâ”€ Text<br>
      â”œâ”€ Image<br>
      â””â”€ Button
                    </div>
                    <div class="tree-properties">
                        <p><strong>æ€§è´¨:</strong> ä¸å¯å˜é…ç½®</p>
                        <p><strong>ç”Ÿå‘½å‘¨æœŸ:</strong> çŸ­æš‚ï¼Œé¢‘ç¹é‡å»º</p>
                        <p><strong>ä½œç”¨:</strong> æè¿°UIåº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­</p>
                        <p><strong>ç‰¹ç‚¹:</strong> è½»é‡çº§ï¼Œå¿«é€Ÿåˆ›å»ºå’Œé”€æ¯</p>
                    </div>
                </div>

                <div class="tree-card">
                    <h3>Element Tree</h3>
                    <div class="tree-visual">
SingleChildElement<br>
  â””â”€ MultiChildElement<br>
      â”œâ”€ LeafElement<br>
      â”œâ”€ LeafElement<br>
      â””â”€ ComponentElement
                    </div>
                    <div class="tree-properties">
                        <p><strong>æ€§è´¨:</strong> Widgetçš„å®ä¾‹</p>
                        <p><strong>ç”Ÿå‘½å‘¨æœŸ:</strong> ç›¸å¯¹ç¨³å®š</p>
                        <p><strong>ä½œç”¨:</strong> ç®¡ç†Widgetå’ŒRenderObject</p>
                        <p><strong>ç‰¹ç‚¹:</strong> è´Ÿè´£Widgetæ ‘çš„diffå’Œæ›´æ–°</p>
                    </div>
                </div>

                <div class="tree-card">
                    <h3>RenderObject Tree</h3>
                    <div class="tree-visual">
RenderBox<br>
  â””â”€ RenderFlex<br>
      â”œâ”€ RenderParagraph<br>
      â”œâ”€ RenderImage<br>
      â””â”€ RenderPointerListener
                    </div>
                    <div class="tree-properties">
                        <p><strong>æ€§è´¨:</strong> å®é™…æ¸²æŸ“å¯¹è±¡</p>
                        <p><strong>ç”Ÿå‘½å‘¨æœŸ:</strong> ç¨³å®šï¼Œå¤ç”¨</p>
                        <p><strong>ä½œç”¨:</strong> æ‰§è¡Œå¸ƒå±€å’Œç»˜åˆ¶</p>
                        <p><strong>ç‰¹ç‚¹:</strong> åŒ…å«å®é™…çš„å°ºå¯¸å’Œä½ç½®ä¿¡æ¯</p>
                    </div>
                </div>
            </div>

            <div class="code-block">
<span class="code-comment">// Widget (ä¸å¯å˜é…ç½®)</span>
<span class="code-keyword">class</span> <span class="code-class">MyWidget</span> <span class="code-keyword">extends</span> <span class="code-class">StatelessWidget</span> {
  @override
  <span class="code-class">Widget</span> build(<span class="code-class">BuildContext</span> context) {
    <span class="code-keyword">return</span> <span class="code-class">Container</span>(  <span class="code-comment">// åˆ›å»ºWidget</span>
      child: <span class="code-class">Text</span>(<span class="code-string">'Hello'</span>),
    );
  }
}

<span class="code-comment">// Element (ç®¡ç†ç”Ÿå‘½å‘¨æœŸ)</span>
<span class="code-comment">// Elementå†…éƒ¨ä¼š:</span>
<span class="code-comment">// 1. åˆ›å»ºæˆ–å¤ç”¨ RenderObject</span>
<span class="code-comment">// 2. å¯¹æ¯”æ–°æ—§Widget</span>
<span class="code-comment">// 3. æ›´æ–°RenderObject</span>

<span class="code-comment">// RenderObject (å®é™…æ¸²æŸ“)</span>
<span class="code-comment">// æ‰§è¡Œ layout() å’Œ paint()</span>
            </div>
        </div>

        <!-- æ¸²æŸ“ç®¡çº¿ -->
        <div id="pipeline" class="tab-content">
            <h2 style="color: #02569B; margin-bottom: 20px;">Flutter æ¸²æŸ“ç®¡çº¿</h2>
            
            <div class="pipeline">
                <div class="pipeline-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Build (æ„å»º)</h4>
                        <p>è°ƒç”¨ Widget çš„ build() æ–¹æ³•ï¼Œæ„å»º Widget æ ‘ã€‚è¿™ä¸ªè¿‡ç¨‹éå¸¸å¿«é€Ÿï¼Œå› ä¸º Widget æ˜¯ä¸å¯å˜çš„é…ç½®å¯¹è±¡ã€‚</p>
                    </div>
                </div>

                <div class="step-arrow">â†“</div>

                <div class="pipeline-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Layout (å¸ƒå±€)</h4>
                        <p>éå† RenderObject æ ‘ï¼Œè®¡ç®—æ¯ä¸ªç»„ä»¶çš„å¤§å°å’Œä½ç½®ã€‚éµå¾ª "Constraints go down, Sizes go up" åŸåˆ™ã€‚</p>
                    </div>
                </div>

                <div class="step-arrow">â†“</div>

                <div class="pipeline-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Paint (ç»˜åˆ¶)</h4>
                        <p>ç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤ï¼Œè®°å½•å¦‚ä½•ç»˜åˆ¶æ¯ä¸ª RenderObjectã€‚ç”Ÿæˆ Layer Tree ç”¨äºåˆæˆã€‚</p>
                    </div>
                </div>

                <div class="step-arrow">â†“</div>

                <div class="pipeline-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Composite (åˆæˆ)</h4>
                        <p>å°†å¤šä¸ª Layer åˆæˆä¸º Sceneã€‚ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ï¼Œæ”¯æŒå±€éƒ¨é‡ç»˜ã€‚</p>
                    </div>
                </div>

                <div class="step-arrow">â†“</div>

                <div class="pipeline-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>Rasterize (å…‰æ …åŒ–)</h4>
                        <p>Skia å¼•æ“å°† Scene å…‰æ …åŒ–ä¸ºåƒç´ ï¼Œä½¿ç”¨ GPU åŠ é€Ÿæ¸²æŸ“åˆ°å±å¹•ã€‚</p>
                    </div>
                </div>
            </div>

            <h3 style="color: #02569B; margin: 40px 0 20px;">å¸ƒå±€çº¦æŸä¼ é€’</h3>
            <div class="code-block">
<span class="code-comment">// æ ¸å¿ƒåŸåˆ™ï¼š</span>
<span class="code-comment">// 1. Constraints go down (çº¦æŸå‘ä¸‹ä¼ é€’)</span>
<span class="code-comment">// 2. Sizes go up (å°ºå¯¸å‘ä¸Šè¿”å›)</span>
<span class="code-comment">// 3. Parent sets position (çˆ¶ç»„ä»¶è®¾ç½®ä½ç½®)</span>

<span class="code-class">Parent</span>
  â†“ ä¼ é€’çº¦æŸ: <span class="code-class">BoxConstraints</span>(minWidth: 0, maxWidth: 400)
<span class="code-class">Child</span>
  â†‘ è¿”å›å°ºå¯¸: <span class="code-class">Size</span>(width: 200, height: 100)
<span class="code-class">Parent</span>
  â†’ è®¾ç½®ä½ç½®: <span class="code-class">Offset</span>(x: 100, y: 50)
            </div>
        </div>

        <!-- æ¶æ„ä¼˜åŠ¿ -->
        <div id="advantages" class="tab-content">
            <h2 style="color: #02569B; margin-bottom: 30px;">Flutter æ¶æ„ä¼˜åŠ¿</h2>
            
            <div class="advantages-grid">
                <div class="advantage-card">
                    <div class="advantage-icon">âš¡</div>
                    <h3>é«˜æ€§èƒ½</h3>
                    <ul>
                        <li>ç›´æ¥ä½¿ç”¨ Skia æ¸²æŸ“</li>
                        <li>AOT ç¼–è¯‘ä¸ºåŸç”Ÿä»£ç </li>
                        <li>60/120fps æµç•…ä½“éªŒ</li>
                        <li>åˆ†å±‚æ¸²æŸ“ä¼˜åŒ–</li>
                        <li>GPU ç¡¬ä»¶åŠ é€Ÿ</li>
                    </ul>
                </div>

                <div class="advantage-card">
                    <div class="advantage-icon">ğŸ¨</div>
                    <h3>è·¨å¹³å°ä¸€è‡´æ€§</h3>
                    <ul>
                        <li>ç»Ÿä¸€çš„æ¸²æŸ“å¼•æ“</li>
                        <li>åƒç´ çº§å®Œç¾æ§åˆ¶</li>
                        <li>æ— å¹³å°å·®å¼‚</li>
                        <li>è‡ªç»˜ UI ç»„ä»¶</li>
                        <li>å“ç‰Œå®šåˆ¶åŒ–</li>
                    </ul>
                </div>

                <div class="advantage-card">
                    <div class="advantage-icon">ğŸš€</div>
                    <h3>å¼€å‘æ•ˆç‡</h3>
                    <ul>
                        <li>çƒ­é‡è½½ (Hot Reload)</li>
                        <li>å£°æ˜å¼ UI</li>
                        <li>ä¸°å¯Œçš„ç»„ä»¶åº“</li>
                        <li>å®Œå–„çš„å·¥å…·é“¾</li>
                        <li>æ´»è·ƒçš„ç”Ÿæ€ç³»ç»Ÿ</li>
                    </ul>
                </div>

                <div class="advantage-card">
                    <div class="advantage-icon">ğŸ”„</div>
                    <h3>å“åº”å¼ç¼–ç¨‹</h3>
                    <ul>
                        <li>çŠ¶æ€é©±åŠ¨ UI</li>
                        <li>å•å‘æ•°æ®æµ</li>
                        <li>ç»„åˆå¼è®¾è®¡</li>
                        <li>å£°æ˜å¼æ›´æ–°</li>
                        <li>æ˜“äºæµ‹è¯•</li>
                    </ul>
                </div>
            </div>

            <h3 style="color: #02569B; margin: 40px 0 20px;">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
            <div class="code-block">
<span class="code-comment">// 1. ä½¿ç”¨ const æ„é€ å‡½æ•°</span>
<span class="code-keyword">const</span> <span class="code-class">Text</span>(<span class="code-string">'Hello'</span>);  <span class="code-comment">// ç¼–è¯‘æ—¶å¸¸é‡ï¼Œé¿å…é‡å»º</span>

<span class="code-comment">// 2. RepaintBoundary éš”ç¦»é‡ç»˜</span>
<span class="code-class">RepaintBoundary</span>(
  child: <span class="code-class">AnimatedWidget</span>(),  <span class="code-comment">// åªé‡ç»˜è¿™éƒ¨åˆ†</span>
);

<span class="code-comment">// 3. ListView.builder æ‡’åŠ è½½</span>
<span class="code-class">ListView</span>.builder(
  itemCount: 1000,
  itemBuilder: (context, index) {
    <span class="code-keyword">return</span> <span class="code-class">ListItem</span>(index);  <span class="code-comment">// æŒ‰éœ€æ„å»º</span>
  },
);

<span class="code-comment">// 4. é¿å…ä¸å¿…è¦çš„ setState</span>
setState(() {
  _counter++;  <span class="code-comment">// åªæ›´æ–°å¿…è¦çš„çŠ¶æ€</span>
});
            </div>
        </div>

        <!-- è®¾è®¡æ¨¡å¼ -->
        <div id="patterns" class="tab-content">
            <h2 style="color: #02569B; margin-bottom: 30px;">Flutter æ ¸å¿ƒè®¾è®¡æ¨¡å¼</h2>
            
            <h3 style="color: #02569B; margin: 30px 0 15px;">1. ç»„åˆæ¨¡å¼ (Composition over Inheritance)</h3>
            <p>é€šè¿‡ç»„åˆå¤šä¸ªå°ç»„ä»¶æ¥æ„å»ºå¤æ‚UIï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿ã€‚</p>
            <div class="code-block">
<span class="code-comment">// âœ… æ¨èï¼šç»„åˆ</span>
<span class="code-class">Column</span>(
  children: [
    <span class="code-class">Header</span>(),
    <span class="code-class">Content</span>(),
    <span class="code-class">Footer</span>(),
  ],
)

<span class="code-comment">// âŒ é¿å…ï¼šæ·±å±‚ç»§æ‰¿</span>
<span class="code-keyword">class</span> <span class="code-class">MyCustomWidget</span> <span class="code-keyword">extends</span> <span class="code-class">ComplexBaseWidget</span> {
  <span class="code-comment">// éš¾ä»¥ç»´æŠ¤</span>
}
            </div>

            <h3 style="color: #02569B; margin: 30px 0 15px;">2. ä¸å¯å˜æ€§ (Immutability)</h3>
            <p>Widget æ˜¯ä¸å¯å˜çš„ï¼Œé€šè¿‡é‡å»ºæ¥æ›´æ–°UIï¼Œä¿è¯çŠ¶æ€ä¸€è‡´æ€§ã€‚</p>
            <div class="code-block">
<span class="code-keyword">class</span> <span class="code-class">MyWidget</span> <span class="code-keyword">extends</span> <span class="code-class">StatelessWidget</span> {
  <span class="code-keyword">final</span> <span class="code-class">String</span> title;      <span class="code-comment">// ä¸å¯å˜å­—æ®µ</span>
  <span class="code-keyword">final</span> <span class="code-class">int</span> count;         <span class="code-comment">// ä¸å¯å˜å­—æ®µ</span>
  
  <span class="code-keyword">const</span> <span class="code-class">MyWidget</span>({
    required <span class="code-keyword">this</span>.title,
    required <span class="code-keyword">this</span>.count,
  });
  
  @override
  <span class="code-class">Widget</span> build(<span class="code-class">BuildContext</span> context) {
    <span class="code-comment">// æ¯æ¬¡éƒ½è¿”å›æ–°çš„Widgetæ ‘</span>
    <span class="code-keyword">return</span> <span class="code-class">Text</span>(<span class="code-string">'$title: $count'</span>);
  }
}
            </div>

            <h3 style="color: #02569B; margin: 30px 0 15px;">3. å“åº”å¼æ›´æ–°</h3>
            <p>UI = f(State)ï¼ŒçŠ¶æ€æ”¹å˜è‡ªåŠ¨è§¦å‘UIæ›´æ–°ã€‚</p>
            <div class="code-block">
<span class="code-keyword">class</span> <span class="code-class">Counter</span> <span class="code-keyword">extends</span> <span class="code-class">StatefulWidget</span> {
  @override
  <span class="code-class">_CounterState</span> createState() => <span class="code-class">_CounterState</span>();
}

<span class="code-keyword">class</span> <span class="code-class">_CounterState</span> <span class="code-keyword">extends</span> <span class="code-class">State</span><<span class="code-class">Counter</span>> {
  <span class="code-class">int</span> _count = 0;
  
  <span class="code-keyword">void</span> _increment() {
    setState(() {          <span class="code-comment">// è§¦å‘é‡å»º</span>
      _count++;            <span class="code-comment">// çŠ¶æ€æ”¹å˜</span>
    });
  }
  
  @override
  <span class="code-class">Widget</span> build(<span class="code-class">BuildContext</span> context) {
    <span class="code-keyword">return</span> <span class="code-class">Column</span>(
      children: [
        <span class="code-class">Text</span>(<span class="code-string">'Count: $_count'</span>),  <span class="code-comment">// UIè‡ªåŠ¨æ›´æ–°</span>
        <span class="code-class">ElevatedButton</span>(
          onPressed: _increment,
          child: <span class="code-class">Text</span>(<span class="code-string">'Increment'</span>),
        ),
      ],
    );
  }
}
            </div>

            <h3 style="color: #02569B; margin: 30px 0 15px;">4. InheritedWidget æ•°æ®å…±äº«</h3>
            <p>å‘ä¸‹ä¼ é€’æ•°æ®ï¼Œé¿å…å‚æ•°å±‚å±‚ä¼ é€’ã€‚</p>
            <div class="code-block">
<span class="code-comment">// å®šä¹‰ InheritedWidget</span>
<span class="code-keyword">class</span> <span class="code-class">ThemeData</span> <span class="code-keyword">extends</span> <span class="code-class">InheritedWidget</span> {
  <span class="code-keyword">final</span> <span class="code-class">Color</span> primaryColor;
  
  <span class="code-keyword">const</span> <span class="code-class">ThemeData</span>({
    required <span class="code-keyword">this</span>.primaryColor,
    required <span class="code-class">Widget</span> child,
  }) : <span class="code-keyword">super</span>(child: child);
  
  <span class="code-keyword">static</span> <span class="code-class">ThemeData</span>? of(<span class="code-class">BuildContext</span> context) {
    <span class="code-keyword">return</span> context.dependOnInheritedWidgetOfExactType<<span class="code-class">ThemeData</span>>();
  }
  
  @override
  <span class="code-class">bool</span> updateShouldNotify(<span class="code-class">ThemeData</span> old) {
    <span class="code-keyword">return</span> primaryColor != old.primaryColor;
  }
}

<span class="code-comment">// ä½¿ç”¨</span>
<span class="code-keyword">final</span> theme = <span class="code-class">ThemeData</span>.of(context);
<span class="code-class">Container</span>(color: theme?.primaryColor);
            </div>

            <h3 style="color: #02569B; margin: 30px 0 15px;">5. Platform Channels</h3>
            <p>Dart ä¸åŸç”Ÿå¹³å°é€šä¿¡ã€‚</p>
            <div class="code-block">
<span class="code-keyword">import</span> <span class="code-string">'package:flutter/services.dart'</span>;

<span class="code-keyword">class</span> <span class="code-class">BatteryLevel</span> {
  <span class="code-keyword">static const</span> platform = <span class="code-class">MethodChannel</span>(<span class="code-string">'com.example/battery'</span>);
  
  <span class="code-keyword">static</span> <span class="code-class">Future</span><<span class="code-class">int</span>> getBatteryLevel() <span class="code-keyword">async</span> {
    <span class="code-keyword">try</span> {
      <span class="code-keyword">final</span> <span class="code-class">int</span> result = <span class="code-keyword">await</span> platform.invokeMethod(<span class="code-string">'getBatteryLevel'</span>);
      <span class="code-keyword">return</span> result;
    } <span class="code-keyword">catch</span> (e) {
      <span class="code-keyword">return</span> -1;
    }
  }
}

<span class="code-comment">// Android ç«¯å®ç° (Kotlin)</span>
<span class="code-comment">// MethodChannel(flutterEngine.dartExecutor, "com.example/battery")</span>
<span class="code-comment">//   .setMethodCallHandler { call, result -></span>
<span class="code-comment">//     if (call.method == "getBatteryLevel") {</span>
<span class="code-comment">//       val level = getBatteryLevel()</span>
<span class="code-comment">//       result.success(level)</span>
<span class="code-comment">//     }</span>
<span class="code-comment">//   }</span>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            
            // æ¿€æ´»å¯¹åº”çš„æ ‡ç­¾æŒ‰é’®
            event.target.classList.add('active');
        }
    </script>
</body>
</html>

