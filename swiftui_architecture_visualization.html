<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftUI æ¶æ„è®¾è®¡å¯è§†åŒ–</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .tab:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .visualization-panel {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none;
        }

        .visualization-panel.active {
            display: block;
        }

        .diagram {
            width: 100%;
            min-height: 600px;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
        }

        .architecture-layer {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .architecture-layer:hover {
            transform: translateX(10px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .layer-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .layer-description {
            font-size: 0.95em;
            opacity: 0.9;
            line-height: 1.6;
        }

        .data-flow-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .flow-node {
            background: white;
            border: 3px solid #667eea;
            padding: 20px;
            border-radius: 12px;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .flow-node::after {
            content: 'â†“';
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #667eea;
        }

        .flow-node:last-child::after {
            display: none;
        }

        .code-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            line-height: 1.6;
            margin: 10px 0;
        }

        .keyword { color: #c586c0; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; }
        .function { color: #dcdcaa; }
        .type { color: #4ec9b0; }
        .property { color: #9cdcfe; }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f5f5f5;
        }

        .property-wrapper-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .property-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .property-card h3 {
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .property-card p {
            line-height: 1.6;
            opacity: 0.9;
        }

        svg text {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
        }

        .legend {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .performance-tip {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .performance-tip.warning {
            background: #fff3e0;
            border-left-color: #ff9800;
        }

        .performance-tip.error {
            background: #ffebee;
            border-left-color: #f44336;
        }

        .interactive-demo {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .demo-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }

        .demo-button:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .demo-output {
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 6px;
            min-height: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ SwiftUI æ¶æ„è®¾è®¡å¯è§†åŒ–</h1>

        <div class="tabs">
            <button class="tab active" onclick="showTab('architecture')">æ•´ä½“æ¶æ„</button>
            <button class="tab" onclick="showTab('dataflow')">æ•°æ®æµ</button>
            <button class="tab" onclick="showTab('properties')">å±æ€§åŒ…è£…å™¨</button>
            <button class="tab" onclick="showTab('rendering')">æ¸²æŸ“æµç¨‹</button>
            <button class="tab" onclick="showTab('layout')">å¸ƒå±€ç³»ç»Ÿ</button>
            <button class="tab" onclick="showTab('comparison')">æ¡†æ¶å¯¹æ¯”</button>
            <button class="tab" onclick="showTab('performance')">æ€§èƒ½ä¼˜åŒ–</button>
        </div>

        <!-- æ•´ä½“æ¶æ„ -->
        <div id="architecture" class="visualization-panel active">
            <h2 style="margin-bottom: 20px; color: #333;">SwiftUI æ•´ä½“æ¶æ„å±‚æ¬¡</h2>
            <div class="diagram">
                <div class="architecture-layer">
                    <div class="layer-title">ğŸ“± Declarative View Layerï¼ˆå£°æ˜å¼è§†å›¾å±‚ï¼‰</div>
                    <div class="layer-description">
                        â€¢ View Protocol & ViewBuilder<br>
                        â€¢ è§†å›¾ç»„åˆä¸ä¿®é¥°ç¬¦é“¾<br>
                        â€¢ DSL (Domain Specific Language)<br>
                        â€¢ è½»é‡çº§å€¼ç±»å‹ç»“æ„ä½“
                    </div>
                </div>

                <div class="architecture-layer">
                    <div class="layer-title">ğŸ”„ State Management Layerï¼ˆçŠ¶æ€ç®¡ç†å±‚ï¼‰</div>
                    <div class="layer-description">
                        â€¢ @State - è§†å›¾ç§æœ‰çŠ¶æ€<br>
                        â€¢ @Binding - åŒå‘ç»‘å®š<br>
                        â€¢ @Observable - è§‚å¯Ÿæ¨¡å¼ï¼ˆiOS 17+ï¼‰<br>
                        â€¢ å±æ€§åŒ…è£…å™¨ç³»ç»Ÿ
                    </div>
                </div>

                <div class="architecture-layer">
                    <div class="layer-title">ğŸ“Š Data Flow Layerï¼ˆæ•°æ®æµå±‚ï¼‰</div>
                    <div class="layer-description">
                        â€¢ @StateObject / @ObservableObject<br>
                        â€¢ @EnvironmentObject - ä¾èµ–æ³¨å…¥<br>
                        â€¢ @Environment - ç¯å¢ƒå€¼<br>
                        â€¢ å•å‘æ•°æ®æµæ¨¡å¼
                    </div>
                </div>

                <div class="architecture-layer">
                    <div class="layer-title">ğŸ“ Layout Engineï¼ˆå¸ƒå±€å¼•æ“ï¼‰</div>
                    <div class="layer-description">
                        â€¢ FlexBox-like å¸ƒå±€ç³»ç»Ÿ<br>
                        â€¢ ä¸‰æ¬¡å¸ƒå±€ä¼ é€’ï¼ˆPropose â†’ Choose â†’ Placeï¼‰<br>
                        â€¢ Layout Protocolï¼ˆiOS 16+ï¼‰<br>
                        â€¢ å¸ƒå±€ä¼˜å…ˆçº§ä¸å¯¹é½
                    </div>
                </div>

                <div class="architecture-layer">
                    <div class="layer-title">ğŸ¬ Rendering Engineï¼ˆæ¸²æŸ“å¼•æ“ï¼‰</div>
                    <div class="layer-description">
                        â€¢ AttributeGraph - ä¾èµ–è¿½è¸ªå›¾<br>
                        â€¢ Diffing Algorithm - å·®å¼‚ç®—æ³•<br>
                        â€¢ CoreAnimation é›†æˆ<br>
                        â€¢ è‡ªåŠ¨æ‰¹é‡æ›´æ–°
                    </div>
                </div>

                <div class="architecture-layer">
                    <div class="layer-title">ğŸ–¥ï¸ Platform Layerï¼ˆå¹³å°å±‚ï¼‰</div>
                    <div class="layer-description">
                        â€¢ UIKit (iOS/iPadOS/tvOS)<br>
                        â€¢ AppKit (macOS)<br>
                        â€¢ WatchKit (watchOS)<br>
                        â€¢ åŸç”Ÿæ§ä»¶æ¡¥æ¥
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•°æ®æµ -->
        <div id="dataflow" class="visualization-panel">
            <h2 style="margin-bottom: 20px; color: #333;">SwiftUI æ•°æ®æµæ¨¡å¼</h2>
            <div class="diagram">
                <div class="data-flow-container">
                    <div class="flow-node">
                        <h3 style="color: #667eea; margin-bottom: 10px;">1ï¸âƒ£ ç”¨æˆ·äº¤äº’ï¼ˆUser Interactionï¼‰</h3>
                        <p>ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡æœ¬ã€æ»‘åŠ¨ç­‰æ“ä½œ</p>
                        <div class="code-example">
<span class="keyword">Button</span>(<span class="string">"å¢åŠ "</span>) {
    count += <span class="string">1</span>  <span class="comment">// è§¦å‘çŠ¶æ€æ”¹å˜</span>
}
                        </div>
                    </div>

                    <div class="flow-node">
                        <h3 style="color: #667eea; margin-bottom: 10px;">2ï¸âƒ£ çŠ¶æ€æ”¹å˜ï¼ˆState Changeï¼‰</h3>
                        <p>@State å±æ€§å€¼æ›´æ–°ï¼Œè§¦å‘ä¾èµ–è¿½è¸ª</p>
                        <div class="code-example">
<span class="keyword">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> count = <span class="string">0</span>
<span class="comment">// count æ”¹å˜ â†’ AttributeGraph æ”¶åˆ°é€šçŸ¥</span>
                        </div>
                    </div>

                    <div class="flow-node">
                        <h3 style="color: #667eea; margin-bottom: 10px;">3ï¸âƒ£ ä¾èµ–è¿½è¸ªï¼ˆDependency Trackingï¼‰</h3>
                        <p>AttributeGraph æ‰¾åˆ°æ‰€æœ‰ä¾èµ–è¯¥çŠ¶æ€çš„è§†å›¾</p>
                        <div class="code-example">
<span class="comment">// ä¾èµ–å›¾åˆ†æï¼š</span>
<span class="comment">// count â†’ Text("\(count)")</span>
<span class="comment">// count â†’ Button enabled çŠ¶æ€</span>
                        </div>
                    </div>

                    <div class="flow-node">
                        <h3 style="color: #667eea; margin-bottom: 10px;">4ï¸âƒ£ è§†å›¾é‡ç®—ï¼ˆView Body Executionï¼‰</h3>
                        <p>é‡æ–°æ‰§è¡Œå—å½±å“è§†å›¾çš„ body å±æ€§</p>
                        <div class="code-example">
<span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">Text</span>(<span class="string">"\(count)"</span>)  <span class="comment">// é‡æ–°è®¡ç®—</span>
}
                        </div>
                    </div>

                    <div class="flow-node">
                        <h3 style="color: #667eea; margin-bottom: 10px;">5ï¸âƒ£ å·®å¼‚å¯¹æ¯”ï¼ˆDiffingï¼‰</h3>
                        <p>å¯¹æ¯”æ–°æ—§è§†å›¾æ ‘ï¼Œè®¡ç®—æœ€å°æ›´æ–°é›†</p>
                        <div class="code-example">
<span class="comment">// æ—§: Text("5")</span>
<span class="comment">// æ–°: Text("6")</span>
<span class="comment">// å·®å¼‚: åªéœ€æ›´æ–°æ–‡æœ¬å†…å®¹</span>
                        </div>
                    </div>

                    <div class="flow-node">
                        <h3 style="color: #667eea; margin-bottom: 10px;">6ï¸âƒ£ UI æ›´æ–°ï¼ˆUI Updateï¼‰</h3>
                        <p>æ›´æ–°åº•å±‚ UIKit/AppKit è§†å›¾</p>
                        <div class="code-example">
<span class="comment">// æ›´æ–° UILabel.text = "6"</span>
<span class="comment">// åº”ç”¨åŠ¨ç”»ï¼ˆå¦‚æœæœ‰ï¼‰</span>
<span class="type">UIView</span>.<span class="function">animate</span>(withDuration: <span class="string">0.3</span>) { ... }
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">æ ¸å¿ƒå…¬å¼</h3>
                <div style="background: #667eea; color: white; padding: 20px; border-radius: 12px; text-align: center; font-size: 1.5em;">
                    View = f(State)
                </div>
                <p style="margin-top: 15px; color: #666; text-align: center;">
                    è§†å›¾æ˜¯çŠ¶æ€çš„çº¯å‡½æ•°ï¼šç»™å®šç›¸åŒçš„çŠ¶æ€ï¼Œæ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è§†å›¾
                </p>
            </div>
        </div>

        <!-- å±æ€§åŒ…è£…å™¨ -->
        <div id="properties" class="visualization-panel">
            <h2 style="margin-bottom: 20px; color: #333;">å±æ€§åŒ…è£…å™¨è¯¦è§£</h2>
            <div class="property-wrapper-grid">
                <div class="property-card">
                    <h3>@State</h3>
                    <p><strong>ç”¨é€”ï¼š</strong>è§†å›¾å†…éƒ¨ç§æœ‰çŠ¶æ€</p>
                    <p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>è§†å›¾ç”Ÿå‘½å‘¨æœŸ</p>
                    <p><strong>æ‰€æœ‰æƒï¼š</strong>è§†å›¾æ‹¥æœ‰</p>
                    <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>å¼€å…³çŠ¶æ€ã€è¾“å…¥æ¡†æ–‡æœ¬ã€é€‰ä¸­é¡¹</p>
                </div>

                <div class="property-card">
                    <h3>@Binding</h3>
                    <p><strong>ç”¨é€”ï¼š</strong>å¼•ç”¨çˆ¶è§†å›¾çš„çŠ¶æ€</p>
                    <p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>å¼•ç”¨å¤–éƒ¨çŠ¶æ€</p>
                    <p><strong>æ‰€æœ‰æƒï¼š</strong>ä¸æ‹¥æœ‰ï¼Œåªè¯»å†™</p>
                    <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>å­è§†å›¾ä¿®æ”¹çˆ¶è§†å›¾çŠ¶æ€</p>
                </div>

                <div class="property-card">
                    <h3>@StateObject</h3>
                    <p><strong>ç”¨é€”ï¼š</strong>è§†å›¾æ‹¥æœ‰çš„å¼•ç”¨ç±»å‹</p>
                    <p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>è§†å›¾åˆ›å»ºæ—¶åˆå§‹åŒ–</p>
                    <p><strong>æ‰€æœ‰æƒï¼š</strong>è§†å›¾æ‹¥æœ‰</p>
                    <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>ViewModel å®ä¾‹</p>
                </div>

                <div class="property-card">
                    <h3>@ObservedObject</h3>
                    <p><strong>ç”¨é€”ï¼š</strong>è§‚å¯Ÿå¤–éƒ¨å¯¹è±¡</p>
                    <p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>å¤–éƒ¨ç®¡ç†</p>
                    <p><strong>æ‰€æœ‰æƒï¼š</strong>ä¸æ‹¥æœ‰</p>
                    <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>ä¼ å…¥çš„ ViewModel</p>
                </div>

                <div class="property-card">
                    <h3>@EnvironmentObject</h3>
                    <p><strong>ç”¨é€”ï¼š</strong>ä¾èµ–æ³¨å…¥</p>
                    <p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>çˆ¶è§†å›¾æ³¨å…¥</p>
                    <p><strong>æ‰€æœ‰æƒï¼š</strong>ç¯å¢ƒæ‹¥æœ‰</p>
                    <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>å…¨å±€å…±äº«æ•°æ®</p>
                </div>

                <div class="property-card">
                    <h3>@Observable (iOS 17+)</h3>
                    <p><strong>ç”¨é€”ï¼š</strong>æ–°çš„è§‚å¯Ÿæ¨¡å¼</p>
                    <p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>è‡ªåŠ¨è¿½è¸ª</p>
                    <p><strong>æ‰€æœ‰æƒï¼š</strong>çµæ´»</p>
                    <p><strong>å…¸å‹åœºæ™¯ï¼š</strong>æ›¿ä»£ ObservableObject</p>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">å±æ€§åŒ…è£…å™¨é€‰æ‹©æµç¨‹å›¾</h3>
                <div class="code-example" style="background: white; color: #333; border: 2px solid #667eea;">
éœ€è¦çŠ¶æ€ï¼Ÿ
  â”œâ”€ æ˜¯ â†’ å€¼ç±»å‹ï¼Ÿ
  â”‚      â”œâ”€ æ˜¯ â†’ è§†å›¾ç§æœ‰ï¼Ÿ
  â”‚      â”‚      â”œâ”€ æ˜¯ â†’ @State
  â”‚      â”‚      â””â”€ å¦ â†’ @Binding
  â”‚      â””â”€ å¦ â†’ å¼•ç”¨ç±»å‹ï¼ˆç±»ï¼‰
  â”‚             â”œâ”€ è§†å›¾åˆ›å»ºï¼Ÿ
  â”‚             â”‚  â””â”€ æ˜¯ â†’ @StateObject
  â”‚             â””â”€ å¤–éƒ¨ä¼ å…¥ï¼Ÿ
  â”‚                â”œâ”€ ç›´æ¥ä¼ å…¥ â†’ @ObservedObject
  â”‚                â””â”€ ç¯å¢ƒæ³¨å…¥ â†’ @EnvironmentObject
  â””â”€ å¦ â†’ ä½¿ç”¨å¸¸è§„å±æ€§ (let/var)
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">ä»£ç ç¤ºä¾‹å¯¹æ¯”</h3>
                <div class="code-example">
<span class="comment">// âœ… æ­£ç¡®ï¼šè§†å›¾æ‹¥æœ‰çŠ¶æ€</span>
<span class="keyword">struct</span> <span class="type">CounterView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> count = <span class="string">0</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">Text</span>(<span class="string">"\(count)"</span>)
    }
}

<span class="comment">// âœ… æ­£ç¡®ï¼šå­è§†å›¾ç»‘å®šçˆ¶çŠ¶æ€</span>
<span class="keyword">struct</span> <span class="type">ParentView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> text = <span class="string">""</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">ChildView</span>(text: <span class="property">$text</span>)  <span class="comment">// $ æŠ•å½±</span>
    }
}

<span class="keyword">struct</span> <span class="type">ChildView</span>: <span class="type">View</span> {
    <span class="keyword">@Binding</span> <span class="keyword">var</span> text: <span class="type">String</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">TextField</span>(<span class="string">"è¾“å…¥"</span>, text: <span class="property">$text</span>)
    }
}

<span class="comment">// âœ… æ­£ç¡®ï¼šViewModel æ¨¡å¼</span>
<span class="keyword">@Observable</span>
<span class="keyword">class</span> <span class="type">ViewModel</span> {
    <span class="keyword">var</span> items: [<span class="type">Item</span>] = []
}

<span class="keyword">struct</span> <span class="type">ListView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> viewModel = <span class="type">ViewModel</span>()
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">List</span>(viewModel.items) { item <span class="keyword">in</span>
            <span class="type">Text</span>(item.name)
        }
    }
}
                </div>
            </div>
        </div>

        <!-- æ¸²æŸ“æµç¨‹ -->
        <div id="rendering" class="visualization-panel">
            <h2 style="margin-bottom: 20px; color: #333;">SwiftUI æ¸²æŸ“å¼•æ“</h2>
            <div class="diagram">
                <h3 style="color: #333; margin-bottom: 15px;">AttributeGraph - ä¾èµ–è¿½è¸ªç³»ç»Ÿ</h3>
                <svg id="renderingSvg" width="100%" height="400"></svg>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">æ¸²æŸ“ä¼˜åŒ–ç­–ç•¥</h3>
                
                <div class="performance-tip">
                    <h4>âœ… ç»†ç²’åº¦æ›´æ–°</h4>
                    <p>SwiftUI åªæ›´æ–°çœŸæ­£æ”¹å˜çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè§†å›¾æ ‘</p>
                    <div class="code-example">
<span class="comment">// åªæœ‰ä¾èµ– count çš„ Text ä¼šæ›´æ–°</span>
<span class="keyword">struct</span> <span class="type">ContentView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">var</span> count = <span class="string">0</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Text</span>(<span class="string">"é™æ€æ–‡æœ¬"</span>)        <span class="comment">// ä¸ä¼šé‡æ–°æ¸²æŸ“</span>
            <span class="type">Text</span>(<span class="string">"\(count)"</span>)        <span class="comment">// ä¼šé‡æ–°æ¸²æŸ“</span>
            <span class="type">Image</span>(<span class="string">"logo"</span>)          <span class="comment">// ä¸ä¼šé‡æ–°æ¸²æŸ“</span>
        }
    }
}
                    </div>
                </div>

                <div class="performance-tip">
                    <h4>âœ… ç»“æ„æ ‡è¯†ï¼ˆStructural Identityï¼‰</h4>
                    <p>SwiftUI ä½¿ç”¨è§†å›¾çš„ç»“æ„ä½ç½®æ¥è¿½è¸ªæ ‡è¯†</p>
                    <div class="code-example">
<span class="type">ForEach</span>(items) { item <span class="keyword">in</span>
    <span class="type">Text</span>(item.name)
        .<span class="function">id</span>(item.id)  <span class="comment">// æ˜¾å¼æ ‡è¯†</span>
}
                    </div>
                </div>

                <div class="performance-tip">
                    <h4>âœ… æ‰¹é‡æ›´æ–°ï¼ˆBatchingï¼‰</h4>
                    <p>å¤šä¸ªçŠ¶æ€æ”¹å˜ä¼šè¢«åˆå¹¶ä¸ºä¸€æ¬¡æ¸²æŸ“</p>
                    <div class="code-example">
<span class="keyword">func</span> <span class="function">updateMultiple</span>() {
    count += <span class="string">1</span>        <span class="comment">// ä¸ä¼šç«‹å³æ¸²æŸ“</span>
    name = <span class="string">"æ–°åå­—"</span>   <span class="comment">// ä¸ä¼šç«‹å³æ¸²æŸ“</span>
    isActive = <span class="keyword">true</span>  <span class="comment">// æ‰¹é‡æ¸²æŸ“ä¸€æ¬¡</span>
}
                    </div>
                </div>
            </div>
        </div>

        <!-- å¸ƒå±€ç³»ç»Ÿ -->
        <div id="layout" class="visualization-panel">
            <h2 style="margin-bottom: 20px; color: #333;">SwiftUI å¸ƒå±€ç³»ç»Ÿ</h2>
            
            <div class="diagram">
                <h3 style="color: #333; margin-bottom: 15px;">ä¸‰æ¬¡å¸ƒå±€ä¼ é€’</h3>
                <div class="data-flow-container" style="flex-direction: row; justify-content: space-around;">
                    <div class="flow-node" style="flex: 1; margin: 0 10px;">
                        <h3 style="color: #667eea;">1ï¸âƒ£ Propose</h3>
                        <p>çˆ¶è§†å›¾å»ºè®®å°ºå¯¸</p>
                        <div class="code-example" style="font-size: 12px;">
parent.<span class="function">propose</span>(
  <span class="type">CGSize</span>(
    width: <span class="string">300</span>,
    height: <span class="string">nil</span>
  )
)
                        </div>
                    </div>

                    <div class="flow-node" style="flex: 1; margin: 0 10px;">
                        <h3 style="color: #667eea;">2ï¸âƒ£ Choose</h3>
                        <p>å­è§†å›¾é€‰æ‹©å°ºå¯¸</p>
                        <div class="code-example" style="font-size: 12px;">
child.<span class="function">sizeThatFits</span>(
  proposal
) 
â†’ <span class="type">CGSize</span>(
    width: <span class="string">280</span>,
    height: <span class="string">100</span>
  )
                        </div>
                    </div>

                    <div class="flow-node" style="flex: 1; margin: 0 10px;">
                        <h3 style="color: #667eea;">3ï¸âƒ£ Place</h3>
                        <p>çˆ¶è§†å›¾æ”¾ç½®å­è§†å›¾</p>
                        <div class="code-example" style="font-size: 12px;">
child.<span class="function">place</span>(
  at: <span class="type">CGPoint</span>(
    x: <span class="string">10</span>,
    y: <span class="string">20</span>
  )
)
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">å¸¸ç”¨å¸ƒå±€å®¹å™¨</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>å®¹å™¨</th>
                            <th>å¸ƒå±€æ–¹å¼</th>
                            <th>å…¸å‹ç”¨é€”</th>
                            <th>ç‰¹ç‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>VStack</strong></td>
                            <td>å‚ç›´å †å </td>
                            <td>åˆ—è¡¨å¼å¸ƒå±€</td>
                            <td>å­è§†å›¾ä»ä¸Šåˆ°ä¸‹æ’åˆ—</td>
                        </tr>
                        <tr>
                            <td><strong>HStack</strong></td>
                            <td>æ°´å¹³å †å </td>
                            <td>è¡Œå¼å¸ƒå±€</td>
                            <td>å­è§†å›¾ä»å·¦åˆ°å³æ’åˆ—</td>
                        </tr>
                        <tr>
                            <td><strong>ZStack</strong></td>
                            <td>å±‚å </td>
                            <td>è¦†ç›–å¼å¸ƒå±€</td>
                            <td>å­è§†å›¾é‡å æ’åˆ—</td>
                        </tr>
                        <tr>
                            <td><strong>LazyVStack</strong></td>
                            <td>å»¶è¿Ÿå‚ç›´</td>
                            <td>é•¿åˆ—è¡¨</td>
                            <td>æŒ‰éœ€åˆ›å»ºè§†å›¾</td>
                        </tr>
                        <tr>
                            <td><strong>LazyHStack</strong></td>
                            <td>å»¶è¿Ÿæ°´å¹³</td>
                            <td>æ°´å¹³æ»šåŠ¨</td>
                            <td>æŒ‰éœ€åˆ›å»ºè§†å›¾</td>
                        </tr>
                        <tr>
                            <td><strong>Grid (iOS 16+)</strong></td>
                            <td>ç½‘æ ¼</td>
                            <td>è¡¨æ ¼å¼å¸ƒå±€</td>
                            <td>çµæ´»çš„è¡Œåˆ—å¸ƒå±€</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">å¸ƒå±€ä¼˜å…ˆçº§ç¤ºä¾‹</h3>
                <div class="interactive-demo">
                    <h4>äº¤äº’å¼æ¼”ç¤º</h4>
                    <p style="margin: 10px 0;">è°ƒæ•´å¸ƒå±€ä¼˜å…ˆçº§æŸ¥çœ‹æ•ˆæœï¼š</p>
                    <div style="display: flex; gap: 10px; margin: 15px 0;">
                        <div style="flex: 1; padding: 15px; background: #ffcdd2; border-radius: 6px;">
                            <strong>è§†å›¾ A</strong><br>
                            ä¼˜å…ˆçº§: <input type="range" min="0" max="10" value="5" id="priorityA" style="width: 100%;">
                            <span id="priorityAValue">5</span>
                        </div>
                        <div style="flex: 1; padding: 15px; background: #c8e6c9; border-radius: 6px;">
                            <strong>è§†å›¾ B</strong><br>
                            ä¼˜å…ˆçº§: <input type="range" min="0" max="10" value="2" id="priorityB" style="width: 100%;">
                            <span id="priorityBValue">2</span>
                        </div>
                    </div>
                    <div class="demo-output" id="layoutDemo">
                        <div style="display: flex; gap: 5px; height: 40px;">
                            <div id="viewA" style="background: #ef5350; border-radius: 4px; transition: all 0.3s; flex: 5; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">A (ä¼˜å…ˆçº§ 5)</div>
                            <div id="viewB" style="background: #66bb6a; border-radius: 4px; transition: all 0.3s; flex: 2; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">B (ä¼˜å…ˆçº§ 2)</div>
                        </div>
                    </div>
                    <p style="margin-top: 10px; color: #666; font-size: 14px;">
                        ğŸ’¡ ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè·å¾—çš„ç©ºé—´è¶Šå¤šã€‚SwiftUI æ ¹æ®ä¼˜å…ˆçº§åˆ†é…å¯ç”¨ç©ºé—´ã€‚
                    </p>
                </div>
            </div>
        </div>

        <!-- æ¡†æ¶å¯¹æ¯” -->
        <div id="comparison" class="visualization-panel">
            <h2 style="margin-bottom: 20px; color: #333;">SwiftUI vs å…¶ä»–æ¡†æ¶</h2>
            
            <div class="diagram">
                <h3 style="color: #333; margin-bottom: 15px;">æŠ€æœ¯ç‰¹æ€§å¯¹æ¯”</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>SwiftUI</th>
                            <th>Flutter</th>
                            <th>React Native</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ç¼–ç¨‹è¯­è¨€</strong></td>
                            <td>Swift</td>
                            <td>Dart</td>
                            <td>JavaScript/TypeScript</td>
                        </tr>
                        <tr>
                            <td><strong>UI èŒƒå¼</strong></td>
                            <td>å£°æ˜å¼</td>
                            <td>å£°æ˜å¼</td>
                            <td>å£°æ˜å¼</td>
                        </tr>
                        <tr>
                            <td><strong>æ¸²æŸ“æ–¹å¼</strong></td>
                            <td>åŸç”Ÿï¼ˆUIKit/AppKitï¼‰</td>
                            <td>Skia Canvas</td>
                            <td>åŸç”Ÿï¼ˆUIKit/Androidï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>çŠ¶æ€ç®¡ç†</strong></td>
                            <td>@State, @Observable</td>
                            <td>setState, Provider, Riverpod</td>
                            <td>useState, Redux, MobX</td>
                        </tr>
                        <tr>
                            <td><strong>å¸ƒå±€ç³»ç»Ÿ</strong></td>
                            <td>FlexBox-like</td>
                            <td>FlexBox</td>
                            <td>FlexBox</td>
                        </tr>
                        <tr>
                            <td><strong>çƒ­é‡è½½</strong></td>
                            <td>âœ… (Xcode Previews)</td>
                            <td>âœ… (Hot Reload)</td>
                            <td>âœ… (Fast Refresh)</td>
                        </tr>
                        <tr>
                            <td><strong>è·¨å¹³å°</strong></td>
                            <td>Apple ç”Ÿæ€</td>
                            <td>iOS/Android/Web/Desktop</td>
                            <td>iOS/Android</td>
                        </tr>
                        <tr>
                            <td><strong>æ€§èƒ½</strong></td>
                            <td>åŸç”Ÿæ€§èƒ½</td>
                            <td>æ¥è¿‘åŸç”Ÿ</td>
                            <td>JS Bridge å¼€é”€</td>
                        </tr>
                        <tr>
                            <td><strong>å­¦ä¹ æ›²çº¿</strong></td>
                            <td>ä¸­ç­‰ï¼ˆéœ€è¦ Swiftï¼‰</td>
                            <td>ä¸­ç­‰ï¼ˆéœ€è¦ Dartï¼‰</td>
                            <td>è¾ƒä½ï¼ˆWeb å¼€å‘è€…å‹å¥½ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>ç”Ÿæ€ç³»ç»Ÿ</strong></td>
                            <td>Apple å®˜æ–¹æ”¯æŒ</td>
                            <td>Google æ”¯æŒ + æ´»è·ƒç¤¾åŒº</td>
                            <td>Meta æ”¯æŒ + åºå¤§ç¤¾åŒº</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">ä»£ç å¯¹æ¯”</h3>
                
                <h4 style="color: #667eea; margin: 20px 0 10px;">SwiftUI</h4>
                <div class="code-example">
<span class="keyword">struct</span> <span class="type">CounterView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> count = <span class="string">0</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span> {
            <span class="type">Text</span>(<span class="string">"è®¡æ•°: \(count)"</span>)
                .<span class="function">font</span>(.<span class="property">title</span>)
            <span class="type">Button</span>(<span class="string">"å¢åŠ "</span>) {
                count += <span class="string">1</span>
            }
        }
    }
}
                </div>

                <h4 style="color: #667eea; margin: 20px 0 10px;">Flutter</h4>
                <div class="code-example">
<span class="keyword">class</span> <span class="type">CounterWidget</span> <span class="keyword">extends</span> <span class="type">StatefulWidget</span> {
  <span class="keyword">@override</span>
  <span class="type">_CounterWidgetState</span> <span class="function">createState</span>() => <span class="type">_CounterWidgetState</span>();
}

<span class="keyword">class</span> <span class="type">_CounterWidgetState</span> <span class="keyword">extends</span> <span class="type">State</span><<span class="type">CounterWidget</span>> {
  <span class="keyword">int</span> count = <span class="string">0</span>;
  
  <span class="keyword">@override</span>
  <span class="type">Widget</span> <span class="function">build</span>(<span class="type">BuildContext</span> context) {
    <span class="keyword">return</span> <span class="type">Column</span>(
      children: [
        <span class="type">Text</span>(<span class="string">'è®¡æ•°: $count'</span>, style: <span class="type">TextStyle</span>(fontSize: <span class="string">24</span>)),
        <span class="type">ElevatedButton</span>(
          onPressed: () => <span class="function">setState</span>(() => count++),
          child: <span class="type">Text</span>(<span class="string">'å¢åŠ '</span>),
        ),
      ],
    );
  }
}
                </div>

                <h4 style="color: #667eea; margin: 20px 0 10px;">React Native</h4>
                <div class="code-example">
<span class="keyword">import</span> <span class="type">React</span>, { <span class="function">useState</span> } <span class="keyword">from</span> <span class="string">'react'</span>;
<span class="keyword">import</span> { <span class="type">View</span>, <span class="type">Text</span>, <span class="type">Button</span> } <span class="keyword">from</span> <span class="string">'react-native'</span>;

<span class="keyword">function</span> <span class="function">CounterView</span>() {
  <span class="keyword">const</span> [count, setCount] = <span class="function">useState</span>(<span class="string">0</span>);
  
  <span class="keyword">return</span> (
    <<span class="type">View</span>>
      <<span class="type">Text</span> style={{ fontSize: <span class="string">24</span> }}>è®¡æ•°: {count}</<span class="type">Text</span>>
      <<span class="type">Button</span> title=<span class="string">"å¢åŠ "</span> onPress={() => <span class="function">setCount</span>(count + <span class="string">1</span>)} />
    </<span class="type">View</span>>
  );
}
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">é€‰æ‹©å»ºè®®</h3>
                <div class="property-wrapper-grid">
                    <div class="property-card">
                        <h3>é€‰æ‹© SwiftUI</h3>
                        <p>âœ… ä¸“æ³¨ Apple å¹³å°</p>
                        <p>âœ… éœ€è¦æœ€ä½³åŸç”Ÿæ€§èƒ½</p>
                        <p>âœ… å›¢é˜Ÿç†Ÿæ‚‰ Swift</p>
                        <p>âœ… æ·±åº¦é›†æˆ Apple ç”Ÿæ€</p>
                    </div>

                    <div class="property-card">
                        <h3>é€‰æ‹© Flutter</h3>
                        <p>âœ… çœŸæ­£çš„è·¨å¹³å°</p>
                        <p>âœ… ç»Ÿä¸€ UI ä½“éªŒ</p>
                        <p>âœ… è‡ªå®šä¹‰ UI éœ€æ±‚</p>
                        <p>âœ… å¿«é€Ÿè¿­ä»£å¼€å‘</p>
                    </div>

                    <div class="property-card">
                        <h3>é€‰æ‹© React Native</h3>
                        <p>âœ… Web å›¢é˜Ÿè½¬ç§»åŠ¨</p>
                        <p>âœ… ä¸°å¯Œçš„ JS ç”Ÿæ€</p>
                        <p>âœ… çµæ´»çš„åŸç”Ÿé›†æˆ</p>
                        <p>âœ… å¤§å‹ç¤¾åŒºæ”¯æŒ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ€§èƒ½ä¼˜åŒ– -->
        <div id="performance" class="visualization-panel">
            <h2 style="margin-bottom: 20px; color: #333;">SwiftUI æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ</h2>
            
            <div class="performance-tip">
                <h3>âœ… 1. è§†å›¾ç»†ç²’åº¦æ§åˆ¶</h3>
                <p>å°†å¤§è§†å›¾æ‹†åˆ†ä¸ºå°çš„ç‹¬ç«‹è§†å›¾ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</p>
                <div class="code-example">
<span class="comment">// âŒ ä¸å¥½ï¼šæ•´ä¸ªåˆ—è¡¨é‡æ¸²æŸ“</span>
<span class="keyword">struct</span> <span class="type">BadListView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">var</span> items: [<span class="type">Item</span>] = []
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">List</span>(items) { item <span class="keyword">in</span>
            <span class="type">Text</span>(item.name)
            <span class="type">Text</span>(item.description)
        }
    }
}

<span class="comment">// âœ… å¥½ï¼šæå–ä¸ºç‹¬ç«‹è§†å›¾</span>
<span class="keyword">struct</span> <span class="type">GoodListView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">var</span> items: [<span class="type">Item</span>] = []
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">List</span>(items) { item <span class="keyword">in</span>
            <span class="type">ItemRow</span>(item: item)  <span class="comment">// ç‹¬ç«‹è§†å›¾</span>
        }
    }
}

<span class="keyword">struct</span> <span class="type">ItemRow</span>: <span class="type">View</span> {
    <span class="keyword">let</span> item: <span class="type">Item</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="type">VStack</span>(alignment: .<span class="property">leading</span>) {
            <span class="type">Text</span>(item.name)
            <span class="type">Text</span>(item.description)
        }
    }
}
                </div>
            </div>

            <div class="performance-tip">
                <h3>âœ… 2. ä½¿ç”¨ Equatable ä¼˜åŒ–</h3>
                <p>å®ç° Equatable åè®®ï¼Œé¿å…ä¸å¿…è¦çš„è§†å›¾æ›´æ–°</p>
                <div class="code-example">
<span class="keyword">struct</span> <span class="type">ExpensiveView</span>: <span class="type">View</span>, <span class="type">Equatable</span> {
    <span class="keyword">let</span> data: <span class="type">ComplexData</span>
    
    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
        <span class="comment">// å¤æ‚çš„è§†å›¾å±‚æ¬¡</span>
    }
    
    <span class="comment">// è‡ªå®šä¹‰ç›¸ç­‰æ€§åˆ¤æ–­</span>
    <span class="keyword">static func</span> <span class="function">==</span> (lhs: <span class="type">ExpensiveView</span>, rhs: <span class="type">ExpensiveView</span>) -> <span class="type">Bool</span> {
        lhs.data.id == rhs.data.id
    }
}

<span class="comment">// ä½¿ç”¨</span>
<span class="type">ExpensiveView</span>(data: complexData)
    .<span class="function">equatable</span>()  <span class="comment">// åªåœ¨çœŸæ­£æ”¹å˜æ—¶æ›´æ–°</span>
                </div>
            </div>

            <div class="performance-tip warning">
                <h3>âš ï¸ 3. é¿å…åœ¨ body ä¸­åˆ›å»ºå¯¹è±¡</h3>
                <p>ä¸è¦åœ¨ body ä¸­åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œä¼šå¯¼è‡´æ¯æ¬¡éƒ½é‡æ–°åˆ›å»º</p>
                <div class="code-example">
<span class="comment">// âŒ ä¸å¥½ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„ DateFormatter</span>
<span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="keyword">let</span> formatter = <span class="type">DateFormatter</span>()  <span class="comment">// æ€§èƒ½é—®é¢˜ï¼</span>
    formatter.dateStyle = .<span class="property">short</span>
    
    <span class="keyword">return</span> <span class="type">Text</span>(formatter.<span class="function">string</span>(from: date))
}

<span class="comment">// âœ… å¥½ï¼šä½¿ç”¨é™æ€æˆ–å®ä¾‹å±æ€§</span>
<span class="keyword">private static let</span> formatter: <span class="type">DateFormatter</span> = {
    <span class="keyword">let</span> f = <span class="type">DateFormatter</span>()
    f.dateStyle = .<span class="property">short</span>
    <span class="keyword">return</span> f
}()

<span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">Text</span>(<span class="keyword">Self</span>.formatter.<span class="function">string</span>(from: date))
}
                </div>
            </div>

            <div class="performance-tip">
                <h3>âœ… 4. LazyStack å»¶è¿ŸåŠ è½½</h3>
                <p>å¯¹äºé•¿åˆ—è¡¨ï¼Œä½¿ç”¨ LazyVStack/LazyHStack æŒ‰éœ€åˆ›å»ºè§†å›¾</p>
                <div class="code-example">
<span class="comment">// âŒ ä¸€æ¬¡æ€§åˆ›å»º 1000 ä¸ªè§†å›¾</span>
<span class="type">VStack</span> {
    <span class="type">ForEach</span>(<span class="string">0</span>...<<span class="string">1000</span>) { i <span class="keyword">in</span>
        <span class="type">HeavyView</span>(index: i)
    }
}

<span class="comment">// âœ… æŒ‰éœ€åˆ›å»ºè§†å›¾</span>
<span class="type">LazyVStack</span> {
    <span class="type">ForEach</span>(<span class="string">0</span>...<<span class="string">1000</span>) { i <span class="keyword">in</span>
        <span class="type">HeavyView</span>(index: i)  <span class="comment">// åªåœ¨å¯è§æ—¶åˆ›å»º</span>
    }
}
                </div>
            </div>

            <div class="performance-tip error">
                <h3>ğŸš« 5. é¿å…è¿‡åº¦ä½¿ç”¨ @Published</h3>
                <p>åªå¯¹çœŸæ­£éœ€è¦è§¦å‘ UI æ›´æ–°çš„å±æ€§ä½¿ç”¨ @Published</p>
                <div class="code-example">
<span class="comment">// âŒ ä¸å¥½ï¼šæ‰€æœ‰å±æ€§éƒ½ @Published</span>
<span class="keyword">class</span> <span class="type">BadViewModel</span>: <span class="type">ObservableObject</span> {
    <span class="keyword">@Published</span> <span class="keyword">var</span> items: [<span class="type">Item</span>] = []
    <span class="keyword">@Published</span> <span class="keyword">var</span> tempCache: [<span class="type">String</span>: <span class="type">Any</span>] = [:]  <span class="comment">// ä¸éœ€è¦ @Published</span>
    <span class="keyword">@Published</span> <span class="keyword">var</span> internalCounter = <span class="string">0</span>         <span class="comment">// ä¸éœ€è¦ @Published</span>
}

<span class="comment">// âœ… å¥½ï¼šåª publish UI ç›¸å…³å±æ€§</span>
<span class="keyword">@Observable</span>
<span class="keyword">class</span> <span class="type">GoodViewModel</span> {
    <span class="keyword">var</span> items: [<span class="type">Item</span>] = []  <span class="comment">// è‡ªåŠ¨è§‚å¯Ÿ</span>
    <span class="keyword">private</span> <span class="keyword">var</span> tempCache: [<span class="type">String</span>: <span class="type">Any</span>] = [:]  <span class="comment">// ä¸è§‚å¯Ÿ</span>
    <span class="keyword">private</span> <span class="keyword">var</span> internalCounter = <span class="string">0</span>  <span class="comment">// ä¸è§‚å¯Ÿ</span>
}
                </div>
            </div>

            <div class="performance-tip">
                <h3>âœ… 6. ä½¿ç”¨ @MainActor</h3>
                <p>ç¡®ä¿ UI æ›´æ–°åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</p>
                <div class="code-example">
<span class="keyword">@MainActor</span>
<span class="keyword">class</span> <span class="type">ViewModel</span>: <span class="type">ObservableObject</span> {
    <span class="keyword">@Published</span> <span class="keyword">var</span> data: [<span class="type">Item</span>] = []
    
    <span class="keyword">func</span> <span class="function">loadData</span>() <span class="keyword">async</span> {
        <span class="comment">// è‡ªåŠ¨åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</span>
        data = <span class="keyword">await</span> <span class="function">fetchData</span>()
    }
}
                </div>
            </div>

            <div class="performance-tip">
                <h3>âœ… 7. å›¾ç‰‡ä¼˜åŒ–</h3>
                <p>ä½¿ç”¨ AsyncImage å’Œé€‚å½“çš„ç¼“å­˜ç­–ç•¥</p>
                <div class="code-example">
<span class="comment">// âœ… ä½¿ç”¨ AsyncImage å¼‚æ­¥åŠ è½½</span>
<span class="type">AsyncImage</span>(url: imageURL) { phase <span class="keyword">in</span>
    <span class="keyword">switch</span> phase {
    <span class="keyword">case</span> .<span class="property">success</span>(<span class="keyword">let</span> image):
        image
            .<span class="function">resizable</span>()
            .<span class="function">aspectRatio</span>(contentMode: .<span class="property">fit</span>)
    <span class="keyword">case</span> .<span class="property">failure</span>:
        <span class="type">Image</span>(systemName: <span class="string">"exclamationmark.triangle"</span>)
    <span class="keyword">case</span> .<span class="property">empty</span>:
        <span class="type">ProgressView</span>()
    <span class="keyword">@unknown default</span>:
        <span class="type">EmptyView</span>()
    }
}
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">æ€§èƒ½è°ƒè¯•å·¥å…·</h3>
                <div class="property-wrapper-grid">
                    <div class="property-card">
                        <h3>Instruments</h3>
                        <p>ä½¿ç”¨ Time Profiler åˆ†æ CPU ä½¿ç”¨</p>
                        <p>ä½¿ç”¨ Allocations æ£€æµ‹å†…å­˜æ³„æ¼</p>
                    </div>

                    <div class="property-card">
                        <h3>View Debugger</h3>
                        <p>3D è§†å›¾å±‚æ¬¡ç»“æ„</p>
                        <p>æ£€æŸ¥è§†å›¾é‡å å’Œè¿‡åº¦ç»˜åˆ¶</p>
                    </div>

                    <div class="property-card">
                        <h3>SwiftUI Inspector</h3>
                        <p>å®æ—¶æŸ¥çœ‹è§†å›¾å±æ€§</p>
                        <p>è°ƒè¯•å¸ƒå±€é—®é¢˜</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ ‡ç­¾åˆ‡æ¢
        function showTab(tabName) {
            // éšè—æ‰€æœ‰é¢æ¿
            document.querySelectorAll('.visualization-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„é¢æ¿
            document.getElementById(tabName).classList.add('active');
            
            // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾
            event.target.classList.add('active');
            
            // å¦‚æœæ˜¯æ¸²æŸ“æµç¨‹æ ‡ç­¾ï¼Œç»˜åˆ¶ SVG
            if (tabName === 'rendering') {
                drawRenderingDiagram();
            }
        }

        // ç»˜åˆ¶æ¸²æŸ“æµç¨‹å›¾
        function drawRenderingDiagram() {
            const svg = d3.select('#renderingSvg');
            svg.selectAll('*').remove();
            
            const width = svg.node().getBoundingClientRect().width;
            const height = 400;
            
            // èŠ‚ç‚¹æ•°æ®
            const nodes = [
                { id: '@State count', x: 150, y: 100, color: '#667eea' },
                { id: 'Text("\(count)")', x: 400, y: 100, color: '#764ba2' },
                { id: 'Button("++") { }', x: 650, y: 100, color: '#764ba2' },
                { id: 'Image("logo")', x: 400, y: 250, color: '#cccccc' }
            ];
            
            // è¿æ¥çº¿æ•°æ®
            const links = [
                { source: nodes[0], target: nodes[1] },
                { source: nodes[0], target: nodes[2] }
            ];
            
            // ç»˜åˆ¶è¿æ¥çº¿
            svg.selectAll('.link')
                .data(links)
                .enter()
                .append('line')
                .attr('x1', d => d.source.x)
                .attr('y1', d => d.source.y)
                .attr('x2', d => d.target.x)
                .attr('y2', d => d.target.y)
                .attr('stroke', '#667eea')
                .attr('stroke-width', 3)
                .attr('stroke-dasharray', '5,5');
            
            // ç»˜åˆ¶èŠ‚ç‚¹
            const nodeGroups = svg.selectAll('.node')
                .data(nodes)
                .enter()
                .append('g')
                .attr('transform', d => `translate(${d.x}, ${d.y})`);
            
            nodeGroups.append('circle')
                .attr('r', 50)
                .attr('fill', d => d.color)
                .attr('stroke', 'white')
                .attr('stroke-width', 3);
            
            nodeGroups.append('text')
                .attr('text-anchor', 'middle')
                .attr('dy', 5)
                .attr('fill', 'white')
                .attr('font-weight', 'bold')
                .text(d => d.id);
            
            // æ·»åŠ è¯´æ˜
            svg.append('text')
                .attr('x', width / 2)
                .attr('y', 350)
                .attr('text-anchor', 'middle')
                .attr('font-size', '16px')
                .attr('fill', '#333')
                .text('ä¾èµ–å›¾ï¼šcount æ”¹å˜æ—¶ï¼Œåªæœ‰ Text å’Œ Button ä¼šæ›´æ–°ï¼ŒImage ä¸å—å½±å“');
        }

        // å¸ƒå±€ä¼˜å…ˆçº§äº¤äº’
        document.addEventListener('DOMContentLoaded', function() {
            const priorityA = document.getElementById('priorityA');
            const priorityB = document.getElementById('priorityB');
            const priorityAValue = document.getElementById('priorityAValue');
            const priorityBValue = document.getElementById('priorityBValue');
            const viewA = document.getElementById('viewA');
            const viewB = document.getElementById('viewB');
            
            function updateLayout() {
                const valA = parseInt(priorityA.value);
                const valB = parseInt(priorityB.value);
                
                priorityAValue.textContent = valA;
                priorityBValue.textContent = valB;
                
                viewA.style.flex = valA || 1;
                viewB.style.flex = valB || 1;
                
                viewA.textContent = `A (ä¼˜å…ˆçº§ ${valA})`;
                viewB.textContent = `B (ä¼˜å…ˆçº§ ${valB})`;
            }
            
            if (priorityA && priorityB) {
                priorityA.addEventListener('input', updateLayout);
                priorityB.addEventListener('input', updateLayout);
            }
        });
    </script>
</body>
</html>

